CREATE DATABASE AIRLINE;
USE AIRLINE;

CREATE TABLE CITY (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    `NAME` VARCHAR(50) NOT NULL,
    SHORT_NAME VARCHAR(10) NOT NULL
);

CREATE TABLE AIRLINE (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    `NAME` VARCHAR(50) NOT NULL UNIQUE,
    SHORT_NAME VARCHAR(10) NOT NULL UNIQUE
);

CREATE TABLE AIRPLANE (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    `NAME` VARCHAR(50) NOT NULL,
    SHORT_NAME VARCHAR(10) NOT NULL,
    AL_ID INT NOT NULL,
    FOREIGN KEY (AL_ID) REFERENCES AIRLINE (ID)
);

CREATE TABLE CHAIR (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    `NAME` VARCHAR(50) NOT NULL UNIQUE,
    QUANTITY INT NOT NULL
);

CREATE TABLE AIRPLANE_CHAIR (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    PRICE BIGINT NOT NULL,
    USED INT DEFAULT 0,
    PLAY_DATE DATE NOT NULL,
	C_ID INT NOT NULL,
    AP_ID INT NOT NULL,
    FOREIGN KEY (C_ID) REFERENCES CHAIR (ID),
    FOREIGN KEY (AP_ID) REFERENCES AIRPLANE (ID)
);

CREATE TABLE AIRPLANE_STORAGE (
	ID INT PRIMARY KEY AUTO_INCREMENT,
	CAPACITY INT NOT NULL,
    AP_ID INT NOT NULL,
    FOREIGN KEY (AP_ID) REFERENCES AIRPLANE (ID)
);

CREATE TABLE FLIGHT (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    TO_CITY INT NOT NULL,
    TO_DATE_TIME DATETIME NOT NULL,
    FORM_CITY INT NOT NULL,
    FORM_DATE_TIME DATETIME NOT NULL,
    USED_CAPACITY INT DEFAULT 0,
	AP_C_ID INT NOT NULL,
    FOREIGN KEY (AP_C_ID) REFERENCES AIRPLANE_CHAIR (ID),
    FOREIGN KEY (TO_CITY) REFERENCES CITY (ID),
    FOREIGN KEY (FORM_CITY) REFERENCES CITY (ID)
);
CREATE TABLE ACOUNT (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    `NAME` VARCHAR(50) NOT NULL,
    EMAIL VARCHAR(50) NOT NULL UNIQUE,
    PASSWORD VARCHAR(50) NOT NULL
);

CREATE TABLE BOOKING (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    BOOKING_DATE_TIME DATETIME NOT NULL,
    LUGGAGE INT NOT NULL DEFAULT 7,
    STATE VARCHAR(30) DEFAULT 'NOT CHECK IN',
    AC_ID INT ,
    F_ID INT NOT NULL,
    FOREIGN KEY (F_ID) REFERENCES FLIGHT (ID),
    FOREIGN KEY (AC_ID) REFERENCES ACOUNT (ID)
);

CREATE TABLE PASSENGER (
	B_ID INT NOT NULL,
    F_NAME VARCHAR(20) NOT NULL,
    M_NAME VARCHAR(20),
    L_NAME VARCHAR(20) NOT NULL,
    BIRTH VARCHAR(15) NOT NULL,
    EMAIL VARCHAR(50) NOT NULL,
    FOREIGN KEY (B_ID) REFERENCES BOOKING (ID)
);